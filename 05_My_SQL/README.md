# 05 테이블, 뷰
## 
## ROW(행)과 열(column)
![Image](https://github.com/user-attachments/assets/81b417eb-3684-4edf-b082-c1a1e0938ad2)  
![Image](https://github.com/user-attachments/assets/4a919dec-9f71-40d2-ad4d-c6c6b3419d17)


## 기본키 후보키 대체키 복합키 외래키 

| 용어                       | 정의                                       | 예시              |
| ------------------------ | ---------------------------------------- | --------------- |
| **엔티티(Entity)**          | 현실 세계의 **객체 또는 개념을 표현한 것**               | 학생, 도서, 직원      |
| **속성(Attribute)**        | 엔티티가 가진 **특성**                           | 이름, 학번, 나이      |
| **키(Key)**               | 엔티티 인스턴스를 **유일하게 식별**할 수 있는 속성(또는 속성 조합) | 학번(student\_id) |
| **인스턴스(Instance)**       | 실제 데이터. **엔티티의 한 개체**                    | 철수, 학번 2023001  |
| **속성값(Attribute Value)** | 인스턴스가 가진 **속성의 실제 값**                    | 이름=철수, 나이=20    |


| 키 종류 | 유일함 | NULL 허용 | 개수 제한 | 역할             |
| ---- | --- | ------- | ----- | -------------- |
| 기본키  | O   | X       | 1개    | 행의 고유 식별자      |
| 후보키  | O   | X       | 여러 개  | 기본키 후보         |
| 대체키  | O   | X       | 여러 개  | 후보키 중 기본키 아닌 것 |
| 복합키  | O   | X       | 1개    | 여러 컬럼 조합 기본키   |
| 외래키  | X   | O (기본값) | 여러 개  | 다른 테이블의 기본키 참조 |

| 키 종류    | 정의                                    | 주요 특징                                                                 |
| ------- | ------------------------------------- | --------------------------------------------------------------------- |
| **기본키** | 테이블에서 각 행을 **유일하게 식별**하는 속성 또는 속성의 조합 | - `UNIQUE`, `NOT NULL` 반드시 만족<br>- 한 테이블에 하나만 존재<br>- 자동 인덱스 생성       |
| **후보키** | 기본키로 **선택 가능한 모든 속성들**                | - `UNIQUE` 조건 만족<br>- 여러 개 존재 가능<br>- 하나가 기본키로 선택되고 나머지는 대체키로 분류      |
| **대체키** | 후보키 중에서 **기본키로 선택되지 않은** 키            | - `UNIQUE` 속성을 유지<br>- NULL 허용 여부는 설계에 따라 다름<br>- 종종 `UNIQUE` 제약으로 설정 |
| **복합키** | 두 개 이상의 컬럼을 조합하여 만든 키                 | - 단일 컬럼으로는 유일성 부족할 때 사용<br>- 조합된 모든 컬럼을 기준으로 유일성 보장                   |
| **외래키** | 다른 테이블의 **기본키나 후보키를 참조**하는 키          | - 테이블 간 관계 설정<br>- 참조 무결성 보장<br>- `ON DELETE`, `ON UPDATE` 제약 가능      |


##### 🔧 정규화의 목적
###### 데이터 중복 제거
###### 삽입, 삭제, 갱신 이상(Anomaly) 방지
###### 데이터 무결성 유지
###### 유지보수 용이성 향상

| 단계         | 핵심 개념                 | 제거하는 문제                          |
| ---------- | --------------------- | -------------------------------- |
| 제1정규형(1NF) | 원자값(Atomic Value)만 저장 | 반복 그룹(Removing Repeating Groups) |
| 제2정규형(2NF) | 부분 함수 종속 제거           | 삽입/삭제 이상                         |
| 제3정규형(3NF) | 이행적 함수 종속 제거          | 중복된 비핵심 정보                       |
| BCNF       | 결정자가 후보키가 아닌 경우 제거    | 더 엄격한 3NF                        |
| 4NF        | 다치 종속 제거              | 테이블 내 다중값 종속 제거                  |
| 5NF        | 조인 종속 제거              | 무손실 분해 불가능한 조인 해결                |


## 트랜젝션

##### **트랜잭션(Transaction)**이란, 하나의 작업 단위를 구성하는 일련의 데이터베이스 연산 묶음을 의미. 이 연산들은 모두 성공하거나 모두 실패해야 하며, 중간에 일부만 실행된 상태로는 남지 않음.
##### 트랜잭션은 데이터의 **정합성(일관성)**을 유지하기 위해 존재

| 요소                       | 설명                                      |
| ------------------------ | --------------------------------------- |
| **A (Atomicity, 원자성)**   | 전부 수행되거나 전부 수행되지 않아야 함 (All or Nothing) |
| **C (Consistency, 일관성)** | 트랜잭션 전후의 데이터가 일관성 있는 상태여야 함             |
| **I (Isolation, 독립성)**   | 동시에 실행되는 트랜잭션끼리 서로 간섭하지 않아야 함           |
| **D (Durability, 지속성)**  | 성공한 트랜잭션의 결과는 시스템에 영구적으로 반영되어야 함        |

| 명령어                            | 설명                  |
| ------------------------------ | ------------------- |
| `START TRANSACTION` 또는 `BEGIN` | 트랜잭션 시작             |
| `COMMIT`                       | 트랜잭션 완료 및 변경 사항 저장  |
| `ROLLBACK`                     | 트랜잭션 중단 및 변경 사항 되돌림 |
| `SAVEPOINT`                    | 트랜잭션 내 중간 저장점 설정    |
| `ROLLBACK TO SAVEPOINT`        | 특정 저장점까지 되돌림        |

####  📌 왜 필요한가?
##### 예: 계좌 이체 도중 첫 번째 계좌에서 돈은 빠졌는데, 두 번째 계좌에 입금은 실패했다면?
##### → 데이터 불일치 발생. 트랜잭션을 사용하면 이런 상황을 방지할 수 있습니다.



## 키 정의 

